#!/bin/bash

clear
# Warna untuk output (sesuaikan dengan kebutuhan)
NC='\e[0m'       # No Color (mengatur ulang warna teks ke default)
DEFBOLD='\e[39;1m' # Default Bold
RB='\e[31;1m'    # Red Bold
GB='\e[32;1m'    # Green Bold
YB='\e[33;1m'    # Yellow Bold
BB='\e[34;1m'    # Blue Bold
MB='\e[35;1m'    # Magenta Bold
CB='\e[36;1m'    # Cyan Bold
WB='\e[37;1m'    # White Bold

# Hitung User
config_file="/usr/local/etc/xray/config/04_inbounds.json"
vmess=$(( $(grep -c "###" "$config_file" 2>/dev/null || echo 0) / 3 ))
vless=$(( $(grep -c "###" "$config_file" 2>/dev/null || echo 0) / 3 ))
trojan=$(( $(grep -c "###" "$config_file" 2>/dev/null || echo 0) / 3 ))
ss=$(( $(grep -c "###" "$config_file" 2>/dev/null || echo 0) / 3 ))





# Fungsi untuk memeriksa status layanan
check_service() {
    local service_name=$1
    if systemctl is-active --quiet "$service_name"; then
        echo "${GB}Good${NC}"
    else
        echo "${RB}Eror${NC}"
    fi
}

clear
LAYOUT="
${BB}————————————————————————————————${NC}
          ${CB}SAN TUNNELING${NC}
${BB}————————————————————————————————${NC}
Xray Service : $(check_service xray.service)
Wireproxy    : $(check_service wireproxy.service)
Nginx        : $(check_service nginx)
${BB}————————————————————————————————${NC}
      ${GB}Vmess Account   : ${YB}2${NC}
      ${GB}Vless Account   : ${YB}2${NC}
      ${GB}Trojan Account  : ${YB}3${NC}
      ${GB}Sodosok Account : ${RB}0${NC}
${BB}————————————————————————————————${NC}
1. ${CB}Vmess Menu${NC}    4. ${CB}Trojan Menu${NC}
2. ${CB}Vless Menu${NC}    5. ${CB}Sodosok Menu${NC}
3. ${CB}Vmess Menu${NC}    6. ${CB}Trojan Menu${NC}
${BB}————————————————————————————————${NC}
     ${MB}Autoscript Mod By San${NC}
${BB}————————————————————————————————${NC}
"
echo -e "$LAYOUT"    
read -p " Select Menu :  " opt
case $opt in
    1) clear ; vmessmenu ;;
    2) clear ; vlessmenu ;;
    3) clear ; trojanmenu ;;
    4) clear ; sodosokmenu ;;
    5) clear ; settingmenu ;;
    *) echo -e "${YB}Invalid input${NC}" ; sleep 1 ; menu ;;
esac
